!function(t){var e={};function n(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/",n(n.s=1)}([function(t,e){},function(t,e,n){n(2),t.exports=n(4)},function(t,e,n){"use strict";n.r(e);n(3)},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(5),r=n(6),i=n(9),o=n(10),a=new r.Stage(window.document.body,{width:800,height:600});a.getLayer("root").addAsset(new i.Square({topLeft:{x:30,y:60},bottomRight:{x:400,y:129}},"green"),"square",1),a.getLayer("root").freeze(),a.addLayer("top",1e3),a.getLayer("top").addAsset(new o.Counter({x:0,y:0},"48px serif","black"),"fps",1e3),new s.Animator(()=>(a.render(),!0)).start()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Animator=class{constructor(t){this._wrapper=(e=>{t()&&(this._id=window.requestAnimationFrame(this._wrapper))})}isPlaying(){return void 0!==this._id}start(){this._id=window.requestAnimationFrame(this._wrapper)}stop(){window.cancelAnimationFrame(this._id)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(7);e.Stage=class{constructor(t,e){this._layerConfigs=[],this._size=e,this._container=window.document.createElement("div"),this._container.style.width=`${this._size.width}px`,this._container.style.height=`${this._size.height}px`,this._container.classList.add("c-stage"),t.appendChild(this._container),this.addLayer("root",0)}addLayer(t,e){const n=this._layerConfigs.concat({depth:e,id:t,layer:new s.Layer(this._container,this._size)});n.sort((t,e)=>t.depth<e.depth?-1:t.depth>e.depth?1:0),this._layerConfigs=n}removeLayer(t){this._layerConfigs=this._layerConfigs.filter(e=>e.id!==t)}getLayer(t){const e=this._layerConfigs.find(e=>e.id===t);if(void 0!==e)return e.layer}render(){this._layerConfigs.forEach(t=>{t.layer.render()})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(8);e.Layer=class{constructor(t,e){this._assetConfigs=[],this._isFrozen=!1,this._isRendered=!1,this._canvas=new s.Canvas(e,"c-stage"),this._canvas.appendTo(t)}addAsset(t,e,n){const s=this._assetConfigs.concat({asset:t,depth:n,id:e});s.sort((t,e)=>t.depth<e.depth?-1:t.depth>e.depth?1:0),this._assetConfigs=s}removeAsset(t){this._assetConfigs=this._assetConfigs.filter(e=>e.id!==t)}getAsset(t){const e=this._assetConfigs.find(e=>e.id===t);if(void 0!==e)return e.asset}render(){this._isFrozen&&this._isRendered||(this._canvas.clear(),this._assetConfigs.forEach(t=>{t.asset.render(this._canvas.context)}),this._isRendered=!0)}freeze(t=!0){this._isFrozen=t}isFrozen(){return this._isFrozen}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(12);e.Canvas=class{get context(){return this._el.getContext("2d")}get width(){return this._size.width}get height(){return this._size.height}constructor(t,e){this._size=t,this._el=document.createElement("canvas"),this._el.setAttribute("width",String(this._size.width)),this._el.setAttribute("height",String(this._size.height)),void 0!==e&&this._el.classList.add(e)}appendTo(t){return t.appendChild(this._el),this}clear(t={topLeft:{x:0,y:0},bottomRight:{x:this.width,y:this.height}}){return this.context.clearRect(t.topLeft.x,t.topLeft.y,s.square.width(t),s.square.height(t)),this}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Square=class{constructor(t,e){this._size=t,this._color=e}render(t){t.fillStyle=this._color,t.fillRect(this._size.topLeft.x,this._size.topLeft.y,this._size.bottomRight.x-this._size.topLeft.x,this._size.bottomRight.y-this._size.topLeft.y)}cleanup(){return!1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(11);e.Counter=class{constructor(t,e,n){this._position=t,this._font=e,this._color=n,this._fps=new s.FPS}render(t){this._fps.tick(),t.fillStyle=this._color,t.fillText(String(this._fps.count()),this._position.x,this._position.y)}cleanup(){return!1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.FPS=class{constructor(){this._frames=[]}count(){const t=this.now()-1e3;for(;this._frames.length>0&&this._frames[0]<t;)this._frames.shift();return this._frames.length}tick(){this._frames.push(this.now())}now(){return window.performance.now()}}},function(t,e,n){"use strict";n.r(e);var s={};n.r(s),n.d(s,"clone",function(){return c}),n.d(s,"degrees",function(){return h}),n.d(s,"radians",function(){return d});var r={};n.r(r),n.d(r,"clone",function(){return l}),n.d(r,"length",function(){return y});var i={};n.r(i),n.d(i,"add",function(){return p}),n.d(i,"clone",function(){return f}),n.d(i,"distance",function(){return _});var o={};n.r(o),n.d(o,"height",function(){return w}),n.d(o,"width",function(){return x});var a={};n.r(a),n.d(a,"Transform",function(){return m});var u={};function c(t){return{radians:t.radians}}function h(t){return t*(180/Math.PI)}function d(t){return t*(Math.PI/180)}function f(t){return{x:t.x,y:t.y}}function l(t){return{start:f(t.start),end:f(t.end)}}function _(t,e){const n=e.x-t.x,s=e.y-t.y;return Math.sqrt(n*n+s*s)}function y(t){return _(t.end,t.start)}function p(t,e){return{x:t.x+e.x,y:t.y+e.y}}n.r(u),n.d(u,"add",function(){return v}),n.d(u,"angle",function(){return b}),n.d(u,"distance",function(){return M}),n.d(u,"dotProduct",function(){return X}),n.d(u,"factory",function(){return z}),n.d(u,"length",function(){return Y}),n.d(u,"negate",function(){return L}),n.d(u,"rotate",function(){return P}),n.d(u,"scale",function(){return C}),n.d(u,"subtract",function(){return k}),n.d(u,"unit",function(){return S});var g=n(0);function w(t){return Math.abs(t.bottomRight.y-t.topLeft.y)}function x(t){return Math.abs(t.bottomRight.x-t.topLeft.x)}class m{get scaleX(){return this._scaleX}get scaleY(){return this._scaleY}get skewX(){return this._skewX}get skewY(){return this._skewY}get translateX(){return this._translateX}get translateY(){return this._translateY}constructor(){this.identity()}identity(){return this._scaleX=1,this._scaleY=1,this._skewX=0,this._skewY=0,this._translateX=0,this._translateY=0,this}transform(t){const e=this._scaleX,n=this._scaleY,s=this._skewX,r=this._skewY,i=this._translateX,o=this._translateY;this._scaleX=e*t.scaleX+s*t.skewY,this._scaleY=n*t.scaleY+r*t.skewX,this._skewX=e*t.skewX+s*t.scaleY,this._skewY=r*t.scaleX+n*t.skewY,this._translateX=e*t.translateX+s*t.translateY+i,this._translateY=n*t.translateY+r*t.translateX+o}rotate(t){const e=Math.cos(t),n=Math.sin(t);return this.transform({scaleX:e,skewX:-n,translateX:0,scaleY:e,skewY:n,translateY:0}),this}scale(t,e){return this.transform({scaleX:t,skewX:0,translateX:0,scaleY:e,skewY:0,translateY:0}),this}skew(t,e){return this.transform({scaleX:1,skewX:t,translateX:0,scaleY:1,skewY:e,translateY:0}),this}translate(t,e){return this.transform({scaleX:1,skewX:0,translateX:t,scaleY:1,skewY:0,translateY:e}),this}transformPoint(t){return{x:t.x*this._scaleX+t.y*this._skewX+this._translateX,y:t.y*this._scaleY+t.x*this._skewY+this._translateY}}}function v(t,e){return{x:t.x+e.x,y:t.y+e.y}}function X(t,e){return t.x*e.x+t.y*e.y}function Y(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function b(t,e){return void 0===e?Math.atan2(t.y,t.x):Math.acos(X(t,e)/(Y(t)*Y(e)))}function k(t,e){return{x:t.x-e.x,y:t.y-e.y}}function M(t,e){return Y(k(t,e))}function z(t,e){return{x:Math.cos(t)*e,y:Math.sin(t)*e}}function C(t,e){return{x:t.x*e,y:t.y*e}}function L(t){return C(t,-1)}function P(t,e){const n=b(t)+e,s=Y(t);return{x:s*Math.cos(n),y:s*Math.sin(n)}}function S(t){const e=Y(t);if(0===e)throw new Error("Could not create unit vector because length is 0");return C(t,1/e)}n.d(e,"angle",function(){return s}),n.d(e,"line",function(){return r}),n.d(e,"point",function(){return i}),n.d(e,"size",function(){return g}),n.d(e,"square",function(){return o}),n.d(e,"transform",function(){return a}),n.d(e,"vector",function(){return u})}]);
//# sourceMappingURL=main.js.map